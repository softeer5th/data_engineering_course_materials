# 2025-02-18 (7주차 화요일) 회고

## Review

요즘 하루종일 메인 프로젝트를 진행하고 있다.

다음과 같은 이슈 2개가 있었다.

* MWAA를 이용해 airflow environment를 생성하고자 했는데 실패함
* 팀원들이 Redshift 접속에 어려움을 겪음

MWAA의 경우.. 이유는 모르겠지만 default로 생성되는 Role을 편집하여, S3에 대한 특정 action의 deny문을 allow로 바꿔주어 해결했다..
다른 팀들은 default Role로 environment를 바로 생성했는데, 우리의 경우는 왜 이걸 편집해줘야 했는지 아직도 의문이다.

예전 기수의 사람들이 사용하던 AWS 계정을 이어 받아 사용하는 것이기 때문에,
아마 그때 작업을 하고 정리되지 않고 남아있던 무언가가 충돌을 일으킨 것이 아닐까 싶기도 한데
-> 애초에 이런 일이 가능한 건가..? 나중에 정확한 원인을 진단해 볼 기회가 생겼으면 좋겠다.

Redshift의 경우..

우리는 3개의 private subnet에 redshift를 생성했는데, 결과적으로 igw를 통한 외부 인터넷과의 연결의 부재가 접속 실패의 원인이었다.

NAT -> 아웃바운드 트래픽만 허용하기 때문에 local에서 Redshift에 요청을 보낼 수는 없음

VPC Endpoint -> 같은 리전 내에서 외부 인터넷을 거치지 않고 VPC 외부에 있는 서비스와 연결하는 데 사용

위 2가지 요소에 대한 이해 없이 이것들을 가지고 해결을 시도한 것 자체가 잘못된 행동이었다.

일단 임시로 (최대한 보안에 신경 쓰며) private subnet에 igw를 연결하여 local에서 시각화 작업을 하고,
나중에 ec2로 시각화 프로그램을 옮겨 구동하고 igw에 대한 연결을 해제하는 것으로 하자.